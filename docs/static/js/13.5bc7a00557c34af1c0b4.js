webpackJsonp([13,0],{CJvu:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),n=o.n(r),a=o("woOf"),s=o.n(a),i=o("NYxO"),l=o("VSB1"),c={name:"votes",data:function(){return{form:{voter:"",proxy:"",producers:[]},rules:{voter:{required:!0,message:"请选择投票账户",trigger:"blur"}},tableData:[],eosmonitorTransaction:"https://eosmonitor.io/txn"}},mounted:function(){this.getProducersFormTableRows()},methods:{handleSubmit:function(e){var t=this;this.$refs[e].validate(function(e){return""!==t.form.proxy&&t.form.producers.length>0?(t.$message.warning("代理和投票不能同时进行"),!1):t.form.producers.length<1||t.form.producers.length>30?(t.$message.warning("投票节点个数范围： 0～30"),!1):e?(t.openFullScreenLoading(),void t.voteproducer()):(t.$message.warning("填写有误"),console.log("error submit!!"),!1)})},voteproducer:function(){var e=this,t=s()({keyProvider:this.privateKey},this.eosConfig);this.$eosjs(t).voteproducer(this.form).then(function(t){var o=t.transaction_id;e.loading.close(),e.$notify({title:"投票成功",message:'\n            <p>接下来可以</p>\n            <a href="'+e.eosmonitorTransaction+"/"+o+'" target="_blank">前往查看浏览器操作详情<a>\n            ',duration:0,type:"success",dangerouslyUseHTMLString:!0})}).catch(function(t){e.loading.close(),e.$message.error(Object(l.a)(t))})},getProducersFormTableRows:function(){var e=this;this.openFullScreenLoading();this.network.getTableRows({json:!0,code:"eosio",scope:"eosio",table:"producers",limit:-1}).then(function(t){e.tableData=s()([],t.rows).map(function(e){return{key:e.owner,label:e.owner,disabled:!1}}),e.loading.close()}).catch(function(t){console.log(t),e.loading.close(),e.$message.error("获取数据失败")})},openFullScreenLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}},computed:n()({},Object(i.c)({privateKey:function(e){return e.key.priKeys},accountNames:function(e){return e.accountNames},network:function(e){return e.eos},eosConfig:function(e){return e.eosConfig}}))},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"container"},[o("el-card",[o("h3",[e._v("选择投票节点")]),e._v(" "),o("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{filterable:"","left-default-checked":[2,3],"right-default-checked":[1],titles:["节点列表","已选节点"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.tableData},model:{value:e.form.producers,callback:function(t){e.$set(e.form,"producers",t)},expression:"form.producers"}})],1),e._v(" "),o("el-card",[o("h3",[e._v("投票给生产者")]),e._v(" "),o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:"投票者",prop:"voter"}},[o("el-select",{attrs:{filterable:"",placeholder:"请选择账户"},model:{value:e.form.voter,callback:function(t){e.$set(e.form,"voter",t)},expression:"form.voter"}},e._l(e.accountNames,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"代理人"}},[o("el-input",{attrs:{placeholder:"委托给代理人"},model:{value:e.form.proxy,callback:function(t){e.$set(e.form,"proxy",t)},expression:"form.proxy"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSubmit("form")}}},[e._v("确定")])],1)],1)],1)],1)},staticRenderFns:[]};var f=o("VU/8")(c,u,!1,function(e){o("TAPv")},"data-v-6e197a4f",null);t.default=f.exports},TAPv:function(e,t){},VSB1:function(e,t,o){"use strict";o.d(t,"a",function(){return r});var r=function(e){try{var t=JSON.parse(e).error,o=t.details,r=t.what,n=t.code,a="code: "+n+" | "+(o&&o.length>0?o.length>0&&o.map(function(e){return e.message}):r)+" ";return console.log(e),a}catch(t){return console.log(t),e}}}});
//# sourceMappingURL=13.5bc7a00557c34af1c0b4.js.map