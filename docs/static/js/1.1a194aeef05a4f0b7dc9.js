webpackJsonp([1],{K4R9:function(t,e,o){o("NA/8"),t.exports=o("FeBl").Number.isNaN},M6e2:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Dd8w"),a=o.n(n),r=o("woOf"),c=o.n(r),i=o("MICi"),l=o.n(i),s=o("NYxO"),u=o("VSB1"),_={name:"account",data:function(){var t=this.$eosjs.modules.ecc,e=function(e,o,n){""===o?n(new Error("请输入合法的 Key!")):t.isValidPublic(o)?n():n(new Error("Key 格式错误，请检查!"))};return{accountTable:[],dialogFormVisible:!1,dialogPubKeyVisible:!1,dialogPubKey:"",dialogAccountNameVisible:!1,dialogAccountName:"",dialogControlledAccountsVisible:!1,dialogControlledAccounts:"",loading:null,form:{creator:"",accountName:"",owner:"",active:"",bytes:8192,stake_net_quantity:"",stake_cpu_quantity:"",transfer:0},rules:{creator:{required:!0,message:"请选择账户",trigger:"change"},accountName:{required:!0,validator:function(t,e,o){""===e?o(new Error("请输入新建账户名")):/^[1-5a-z]+$/g.test(e)?o():o(new Error("名字只能包含 1-5 a-z!"))},trigger:"blur"},owner:{required:!0,validator:e,trigger:"blur"},active:{required:!0,validator:e,trigger:"blur"},bytes:{required:!0,validator:function(t,e,o){""===e?o(new Error("请输入 Bytes!")):l()(Number(e))?o(new Error("Bytes 必须为纯数字")):o()},trigger:"blur"},stake_net_quantity:{required:!0,trigger:"blur"},stake_cpu_quantity:{required:!0,trigger:"blur"}},eosmonitorTransaction:"https://eosmonitor.io/txn",eosmonitorAccounts:"https://eosmonitor.io/accounts",eosmonitorAccount:"https://eosmonitor.io/account"}},methods:{showDialogFormVisible:function(){this.key?this.dialogFormVisible=!0:(this.$message.warning("请先导入秘钥！"),this.$router.push({path:"/importkeys",query:{redirect:this.$router.currentRoute.fullPath}}))},getAccountListInfo:function(t){var e=this;this.openFullScreenLoading();var o=t.map(function(t){return e.getAccountInfo(t)});this.accountTable=[],o.forEach(function(t){t.then(function(o){t.private=e.checkAccountIsPrivate(t.account_name),e.accountTable.push(c()({},o)),e.dialogPubKeyVisible=!1,e.loading.close()}).catch(function(t){e.loading.close(),e.$message.error("获取数据失败"),console.log(t)})})},getAccountInfo:function(t){return this.network.getAccount({account_name:t})},getAccountInfoByKey:function(t){return this.network.getKeyAccounts(t)},getControlledAccounts:function(t){return this.network.getControlledAccounts({controlling_account:t})},closeDialogForm:function(){this.dialogFormVisible=!1},getAccountsByKey:function(){var t=this,e=this.$eosjs.modules.ecc;""!==this.dialogPubKey&&e.isValidPublic(this.dialogPubKey)?this.getAccountInfoByKey(this.dialogPubKey).then(function(e){t.getAccountListInfo(c()([],e.account_names))}).catch(function(e){t.$message.error("查询失败"),console.log(e)}):this.$message.warning("请输入合法的公钥！")},getAccountByName:function(){var t=this;""!==this.dialogAccountName&&this.dialogAccountName.length<=12?(this.openFullScreenLoading(),this.getAccountInfo(this.dialogAccountName).then(function(e){var o=c()({},e);o.private=t.checkAccountIsPrivate(o.account_name),t.accountTable=[o],t.dialogAccountNameVisible=!1,t.$message.success("查询成功"),t.loading.close()}).catch(function(e){t.loading.close(),console.log(e),t.$message.error("查询失败")})):this.$message.warning("请输入正确的账户名")},getControlledAccountsByName:function(){var t=this;""!==this.dialogControlledAccounts&&this.dialogControlledAccounts.length<=12?(this.openFullScreenLoading(),this.getControlledAccounts(this.dialogControlledAccounts).then(function(e){t.getAccountListInfo(c()([],e.controlled_accounts)),t.dialogControlledAccountsVisible=!1,t.$message.success("查询成功"),t.loading.close()}).catch(function(e){t.loading.close(),console.log(e),t.$message.error("查询失败")})):this.$message.warning("请输入正确的账户名")},checkAccountIsPrivate:function(t){return this.accountNames&&this.accountNames.some(function(e){return e===t})},checkAccountIsHave:function(t,e){var o,n=void 0;return o=e.some(function(e,o){return n=o,t.account_name===e.account_name}),{index:n,bool:o}},handleCreateNewAccount:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message.warning("填写有误"),console.log("error submit!!"),!1;e.openFullScreenLoading(),e.createNewAccount()})},resetForm:function(t){this.$refs[t].resetFields()},createNewAccount:function(){var t=this,e=c()({keyProvider:this.key.priKeys},this.eosConfig);this.$eosjs(e).transaction(function(e){e.newaccount({creator:t.form.creator,name:t.form.accountName,owner:t.form.owner,active:t.form.active}),e.buyrambytes({payer:t.form.creator,receiver:t.form.accountName,bytes:Number(t.form.bytes)}),e.delegatebw({from:t.form.creator,receiver:t.form.accountName,stake_net_quantity:t.form.stake_net_quantity,stake_cpu_quantity:t.form.stake_cpu_quantity,transfer:t.form.transfer})}).then(function(e){var o=e.transaction_id;t.loading.close(),t.$notify({title:"创建成功",message:'\n            <p>接下来可以</p>\n            <a href="'+t.eosmonitorTransaction+"/"+o+'" target="_blank">前往查看浏览器操作详情<a>\n            ',duration:0,type:"success",dangerouslyUseHTMLString:!0})}).catch(function(e){t.$message.error(Object(u.a)(e)),t.loading.close(),t.$notify({title:"失败原因",message:'\n            <ol>\n              <li>1. 输入格式错误</li>\n              <li>2. 账户余额不足</li>\n              <li>3. 账户名字已存在</li>\n            </ol>\n            <br>\n            前往查看账户余额： <a href="'+t.eosmonitorAccount+"/"+t.form.creator+'" target="_blank">'+t.form.creator+'<a>\n            <br>\n            前往查看账户是否被占用：<a href="'+t.eosmonitorAccounts+'" target="_blank">'+t.form.accountName+"<a>\n            ",duration:0,type:"error",dangerouslyUseHTMLString:!0})})},openFullScreenLoading:function(){this.loading=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})}},computed:a()({},Object(s.c)({key:function(t){return t.key},accountNames:function(t){return t.accountNames},network:function(t){return t.eos},eosConfig:function(t){return t.eosConfig}}),{cpAccountTable:function(){var t=this,e=c()([],this.accountTable);return e=e.map(function(e){var o=new Date(e.created);return e.created=t.$dayjs(o).format("YYYY-MM-DD HH:mm:ss"),e})}})},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("el-row",[o("el-col",{attrs:{xs:24,sm:22,lg:14,push:1}},[o("el-card",[o("el-button",{attrs:{type:"text"},on:{click:t.showDialogFormVisible}},[t._v("\n          "+t._s(t.$t("account.btn_list.createAccount"))+"\n        ")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogPubKeyVisible=!0}}},[t._v("\n          "+t._s(t.$t("account.btn_list.search_PK"))+"\n        ")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogAccountNameVisible=!0}}},[t._v("\n          "+t._s(t.$t("account.btn_list.search_AN"))+"\n        ")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogControlledAccountsVisible=!0}}},[t._v("\n          "+t._s(t.$t("account.btn_list.search_CA"))+"\n        ")])],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("account.createAccount.title"),visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"form",attrs:{"label-width":"120",rules:t.rules,model:t.form}},[o("el-form-item",{attrs:{label:t.$t("account.createAccount.creator"),prop:"creator"}},[o("el-select",{attrs:{filterable:"",placeholder:t.$t("account.createAccount.creator_placeholder")},model:{value:t.form.creator,callback:function(e){t.$set(t.form,"creator",e)},expression:"form.creator"}},t._l(t.accountNames,function(t){return o("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.accountName"),prop:"accountName"}},[o("el-input",{attrs:{maxlength:"12",placeholder:t.$t("account.createAccount.accountName_placeholder")},model:{value:t.form.accountName,callback:function(e){t.$set(t.form,"accountName",e)},expression:"form.accountName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.owner"),prop:"owner"}},[o("el-input",{attrs:{placeholder:t.$t("account.createAccount.owner_placeholder")},model:{value:t.form.owner,callback:function(e){t.$set(t.form,"owner",e)},expression:"form.owner"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.active"),prop:"active"}},[o("el-input",{attrs:{placeholder:t.$t("account.createAccount.active_placeholder")},model:{value:t.form.active,callback:function(e){t.$set(t.form,"active",e)},expression:"form.active"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.bytes"),prop:"bytes"}},[o("el-input",{attrs:{placeholder:t.$t("account.createAccount.bytes_placeholder")},model:{value:t.form.bytes,callback:function(e){t.$set(t.form,"bytes",e)},expression:"form.bytes"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.net"),prop:"stake_net_quantity"}},[o("el-input",{attrs:{placeholder:t.$t("account.createAccount.net_placeholder")},model:{value:t.form.stake_net_quantity,callback:function(e){t.$set(t.form,"stake_net_quantity",e)},expression:"form.stake_net_quantity"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.cpu"),prop:"stake_cpu_quantity"}},[o("el-input",{attrs:{placeholder:t.$t("account.createAccount.cpu_placeholder")},model:{value:t.form.stake_cpu_quantity,callback:function(e){t.$set(t.form,"stake_cpu_quantity",e)},expression:"form.stake_cpu_quantity"}})],1),t._v(" "),o("el-form-item",{attrs:{label:t.$t("account.createAccount.transfer")}},[o("el-radio",{attrs:{label:1},model:{value:t.form.transfer,callback:function(e){t.$set(t.form,"transfer",e)},expression:"form.transfer"}},[t._v("true")]),t._v(" "),o("el-radio",{attrs:{label:0},model:{value:t.form.transfer,callback:function(e){t.$set(t.form,"transfer",e)},expression:"form.transfer"}},[t._v("false")]),t._v(" "),o("p",[t._v(" "+t._s(t.$t("account.createAccount.transfer_tips")))])],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleCreateNewAccount("form")}}},[t._v("\n              "+t._s(t.$t("account.createAccount.createNewAccount"))+"\n            ")]),t._v(" "),o("el-button",{attrs:{type:"ghost"},on:{click:function(e){t.resetForm("form")}}},[t._v("\n              "+t._s(t.$t("account.createAccount.resetForm"))+"\n            ")])],1)],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("account.searchAccountPubKey.title"),visible:t.dialogPubKeyVisible},on:{"update:visible":function(e){t.dialogPubKeyVisible=e}}},[o("el-input",{attrs:{type:"text",placeholder:t.$t("searchAccountPubKey.placeholder")},model:{value:t.dialogPubKey,callback:function(e){t.dialogPubKey=e},expression:"dialogPubKey"}}),t._v(" "),o("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.getAccountsByKey}},[t._v("\n          "+t._s(t.$t("searchAccountPubKey.btn"))+"\n        ")])],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("account.searchAccountName.title"),visible:t.dialogAccountNameVisible},on:{"update:visible":function(e){t.dialogAccountNameVisible=e}}},[o("el-input",{attrs:{type:"text",maxlength:"12",placeholder:t.$t("account.searchAccountName.placeholder")},model:{value:t.dialogAccountName,callback:function(e){t.dialogAccountName=e},expression:"dialogAccountName"}}),t._v(" "),o("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.getAccountByName}},[t._v("\n          "+t._s(t.$t("account.searchAccountName.btn"))+"\n        ")])],1),t._v(" "),o("el-dialog",{attrs:{title:t.$t("account.searchControllAccount.title"),visible:t.dialogControlledAccountsVisible},on:{"update:visible":function(e){t.dialogControlledAccountsVisible=e}}},[o("el-input",{attrs:{type:"text",maxlength:"12",placeholder:t.$t("account.searchControllAccount.placeholder")},model:{value:t.dialogControlledAccounts,callback:function(e){t.dialogControlledAccounts=e},expression:"dialogControlledAccounts"}}),t._v(" "),o("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:t.getControlledAccountsByName}},[t._v("\n          "+t._s(t.$t("account.searchControllAccount.btn"))+"\n        ")])],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cpAccountTable}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-form",{attrs:{"label-position":"left",size:"mini"}},[o("el-form-item",[o("h3",[t._v("总资源")]),t._v(" "),o("p",[t._v("NET 权重："+t._s(e.row.total_resources.net_weight)+" / 自身抵押："+t._s(e.row.self_delegated_bandwidth.net_weight))]),t._v(" "),o("p",[t._v("CPU 权重："+t._s(e.row.total_resources.cpu_weight)+" / 自身抵押："+t._s(e.row.self_delegated_bandwidth.cpu_weight))]),t._v(" "),o("p",[t._v("可用RAM："+t._s(e.row.total_resources.ram_bytes)+" bytes / 已用："+t._s(e.row.ram_usage)+" bytes")]),t._v(" "),e.row.refund_request?o("p",[t._v("\n                  退还EOS资源请求：\n                  CPU "),o("span",[t._v(t._s(e.row.refund_request.cpu_amount))]),t._v(" /\n                  NET "),o("span",[t._v(t._s(e.row.refund_request.net_amount))]),t._v(" "),o("i",{staticClass:"el-icon-arrow-right",staticStyle:{color:"green","font-weight":"800"}}),t._v(" "),o("span",[t._v(t._s(e.row.refund_request.owner))]),t._v("\n                  ("),o("span",[t._v(t._s(e.row.refund_request.request_time))]),t._v(")\n                ")]):t._e()])],1),t._v(" "),e.row.delegated_bandwidth?o("el-form",[o("el-form-item",[o("h3",[t._v("抵押带宽")]),t._v(" "),o("p",[t._v("\n                  from: "+t._s(e.row.delegated_bandwidth.from)+"\n                  "),o("i",{staticClass:"el-icon-caret-right"}),t._v("\n                  to: "+t._s(e.row.delegated_bandwidth.to)+"\n                  | 网络权重: "+t._s(e.row.delegated_bandwidth.net_weight)+" | CPU 权重: "+t._s(e.row.delegated_bandwidth.cpu_weight)+"\n                ")])])],1):t._e(),t._v(" "),o("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",size:"mini",inline:""}},[o("el-form-item",[o("h3",[t._v("网络使用情况")])]),t._v(" "),o("el-form-item"),t._v(" "),o("el-form-item",{attrs:{label:"已用NET"}},[o("span",[t._v(t._s(e.row.net_limit.used))])]),t._v(" "),o("el-form-item",{attrs:{label:"已用CPU"}},[o("span",[t._v(t._s(e.row.cpu_limit.used))])]),t._v(" "),o("el-form-item",{attrs:{label:"可得"}},[o("span",[t._v(t._s(e.row.net_limit.available))])]),t._v(" "),o("el-form-item",{attrs:{label:"可得"}},[o("span",[t._v(t._s(e.row.cpu_limit.available))])]),t._v(" "),o("el-form-item",{attrs:{label:"最大可用"}},[o("span",[t._v(t._s(e.row.net_limit.max))])]),t._v(" "),o("el-form-item",{attrs:{label:"最大可用"}},[o("span",[t._v(t._s(e.row.cpu_limit.max))])])],1),t._v(" "),t._l(e.row.permissions,function(e,n){return[o("el-form",{key:n,attrs:{"label-position":"left",size:"mini"}},[o("el-form-item",[o("h3",[t._v("账户"+t._s(e.perm_name)+"权限")]),t._v(" "),o("p",[t._v("阀值："+t._s(e.required_auth.threshold))]),t._v(" "),t._l(e.required_auth.keys,function(e,n){return o("p",{key:n},[t._v("\n                  weight: "+t._s(e.weight)+" / key: "+t._s(e.key)+"\n                  ")])}),t._v(" "),o("p",[t._v("parent: "),o("strong",{staticStyle:{color:"#4285f4"}},[t._v(t._s(e.parent))])]),t._v(" "),o("p",[t._v("\n                    此公钥相关账户：\n                    "),t._l(e.accounts,function(e,n){return o("el-tag",{key:n,attrs:{size:"mini",color:"#F2FAFE",hit:!1}},[t._v(t._s(e))])})],2)],2)],1)]}),t._v(" "),e.row.voter_info?o("el-form",[o("el-form-item",[o("h3",[t._v("账户投票信息")]),t._v(" "),o("p",[t._v("抵押："+t._s(e.row.voter_info.staked/1e4)+" EOS")]),t._v(" "),o("p",[t._v("\n                  已投的生产者：\n                  "),t._l(e.row.voter_info.producers,function(e){return o("el-tag",{key:e,attrs:{type:"success",size:"mini"}},[t._v(t._s(e))])})],2),t._v(" "),o("hr"),t._v(" "),o("p",[t._v("最后一次投票权重："+t._s(e.row.voter_info.last_vote_weight))]),t._v(" "),o("p",[t._v("取消抵押："+t._s(e.row.voter_info.unstaking))]),t._v(" "),o("p",[t._v("最后一次取消抵押时间："+t._s(e.row.voter_info.last_unstake_time))]),t._v(" "),o("p",[t._v("deferred_trx_id： "+t._s(e.row.voter_info.is_proxy))]),t._v(" "),1===e.row.voter_info.is_proxy?o("p",[t._v("\n                  是否已代理："+t._s(0===e.row.voter_info.is_proxy?"否":"是")+"\n                ")]):t._e(),t._v(" "),1===e.row.voter_info.is_proxy?[o("p",[t._v("代理账户："+t._s(e.row.voter_info.proxy))]),t._v(" "),o("p",[t._v("代理投票权重：")])]:t._e()],2)],1):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"account_name",label:"账户"}}),t._v(" "),o("el-table-column",{attrs:{prop:"created",label:"创建时间",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"net_weight",label:"网络权重"}}),t._v(" "),o("el-table-column",{attrs:{prop:"net_weight",label:"CPU权重"}}),t._v(" "),o("el-table-column",{attrs:{prop:"ram_quota",label:"RAM份额"}}),t._v(" "),o("el-table-column",{attrs:{prop:"ram_usage",label:"已用RAM"}}),t._v(" "),o("el-table-column",{attrs:{label:"标识"},scopedSlots:t._u([{key:"default",fn:function(t){return[t.row.private?o("i",{staticClass:"el-icon-star-on"}):o("i",{staticClass:"el-icon-star-off"})]}}])})],1)],1),t._v(" "),o("el-col",{staticClass:"hidden-md-and-down",attrs:{lg:6,push:2}},[o("el-card",{staticStyle:{color:"#909399"}},[o("h3",{staticStyle:{color:"#2c3e50"}},[t._v("提示：")]),t._v(" "),o("p",[o("i",{staticClass:"el-icon-star-on"}),t._v(" 当前私钥相关的账户")]),t._v(" "),o("p",[o("i",{staticClass:"el-icon-star-off"}),t._v(" 当前私钥无关的账户")])])],1)],1)],1)},staticRenderFns:[]};var d=o("VU/8")(_,m,!1,function(t){o("mhRF")},"data-v-307d86ae",null);e.default=d.exports},MICi:function(t,e,o){t.exports={default:o("K4R9"),__esModule:!0}},"NA/8":function(t,e,o){var n=o("kM2E");n(n.S,"Number",{isNaN:function(t){return t!=t}})},mhRF:function(t,e){}});
//# sourceMappingURL=1.1a194aeef05a4f0b7dc9.js.map