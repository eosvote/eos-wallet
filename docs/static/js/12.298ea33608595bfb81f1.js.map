{"version":3,"sources":["webpack:///./src/utils/helper.js","webpack:///src/view/producers/regproxy/index.vue","webpack:///./src/view/producers/regproxy/index.vue?3f07","webpack:///./src/view/producers/regproxy/index.vue"],"names":["errorHelper","e","_JSON$parse$error","JSON","parse","error","details","what","code","tips","length","map","item","message","console","log","err","name","data","form","proxy","isproxy","rules","required","trigger","tableData","eosmonitorTransaction","loading","methods","handleSubmit","formName","_this","this","$refs","validate","valid","$message","warning","openFullScreenLoading","regproxy","_this2","config","assign_default","keyProvider","privateKey","eosConfig","$eosjs","then","res","transaction_id","close","$notify","title","duration","type","dangerouslyUseHTMLString","catch","Object","helper","$loading","lock","text","spinner","background","computed","extends_default","vuex_esm","state","key","priKeys","accountNames","view_producers_regproxy","render","_vm","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","model","label","prop","filterable","placeholder","value","callback","$$v","$set","expression","_l","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","producers_regproxy","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/12.298ea33608595bfb81f1.js","sourcesContent":["export const errorHelper = function (e) {\n  try {\n    let {error: {details, what, code}} = JSON.parse(e)\n    let message = ''\n    if (details && details.length > 0) {\n      message = details.length > 0 && details.map(item => {\n        return item.message\n      })\n    } else {\n      message = what\n    }\n    let tips = `code: ${code} | ${message} `\n    console.log(e)\n    return tips\n  } catch (err) {\n    console.log(err)\n    return e\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helper.js","<template>\n  <div class=\"container\">\n    <el-card>\n      <h3>注册为投票代理人</h3>\n      <el-form :model=\"form\" :rules=\"rules\" ref=\"form\">\n        <el-form-item label=\"注册账户\" prop=\"proxy\">\n          <el-select v-model=\"form.proxy\" filterable placeholder=\"请选择账户\">\n            <el-option\n              v-for=\"name in accountNames\"\n              :key=\"name\"\n              :label=\"name\"\n              :value=\"name\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"是否成为为代理\">\n          <el-radio v-model=\"form.isproxy\" :label=\"1\">true</el-radio>\n          <el-radio v-model=\"form.isproxy\" :label=\"0\">false</el-radio>\n          <p>( 提示：注册代理选 True，取消选 false )</p>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"handleSubmit('form')\">确定</el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport {errorHelper} from '@/utils/helper'\n\nexport default {\n  name: 'votes',\n  data () {\n    return {\n      form: {\n        proxy: '',\n        isproxy: 1\n      },\n      rules: {\n        proxy: {required: true, message: '请选择注册账户名', trigger: 'change'}\n      },\n      tableData: [],\n      eosmonitorTransaction: 'https://eosmonitor.io/txn',\n      loading: null\n    }\n  },\n  methods: {\n    handleSubmit (formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.openFullScreenLoading()\n          this.regproxy()\n        } else {\n          this.$message.warning('填写有误')\n          console.log('error submit!!')\n          return false\n        }\n      })\n    },\n    regproxy () {\n      let config = Object.assign(\n        {\n          keyProvider: this.privateKey\n        },\n        this.eosConfig\n      )\n      let eos = this.$eosjs(config)\n      eos.regproxy(this.form)\n        .then(res => {\n          /* eslint-disable camelcase */\n          let { transaction_id } = res\n          this.loading.close()\n          this.$notify({\n            title: `${this.isproxy ? '注册' : '取消'}成功`,\n            message: `\n            <p>接下来可以</p>\n            <a href=\"${this.eosmonitorTransaction}/${transaction_id}\" target=\"_blank\">前往查看浏览器操作详情<a>\n            `,\n            duration: 0,\n            type: 'success',\n            dangerouslyUseHTMLString: true\n          })\n        })\n        .catch(e => {\n          this.loading.close()\n          this.$message.error(errorHelper(e))\n        })\n    },\n    openFullScreenLoading () {\n      this.loading = this.$loading({\n        lock: true,\n        text: 'Loading',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0.7)'\n      })\n    }\n  },\n  computed: {\n    ...mapState({\n      privateKey: state => state.key.priKeys,\n      accountNames: state => state.accountNames,\n      eosConfig: state => state.eosConfig\n    })\n  }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n.el-card + .el-card {\n  margin-top: 20px;\n}\n.container {\n  margin-top: 20px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/view/producers/regproxy/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('el-card',[_c('h3',[_vm._v(\"注册为投票代理人\")]),_vm._v(\" \"),_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"注册账户\",\"prop\":\"proxy\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择账户\"},model:{value:(_vm.form.proxy),callback:function ($$v) {_vm.$set(_vm.form, \"proxy\", $$v)},expression:\"form.proxy\"}},_vm._l((_vm.accountNames),function(name){return _c('el-option',{key:name,attrs:{\"label\":name,\"value\":name}})}))],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否成为为代理\"}},[_c('el-radio',{attrs:{\"label\":1},model:{value:(_vm.form.isproxy),callback:function ($$v) {_vm.$set(_vm.form, \"isproxy\", $$v)},expression:\"form.isproxy\"}},[_vm._v(\"true\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":0},model:{value:(_vm.form.isproxy),callback:function ($$v) {_vm.$set(_vm.form, \"isproxy\", $$v)},expression:\"form.isproxy\"}},[_vm._v(\"false\")]),_vm._v(\" \"),_c('p',[_vm._v(\"( 提示：注册代理选 True，取消选 false )\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.handleSubmit('form')}}},[_vm._v(\"确定\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f7945b9e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/producers/regproxy/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f7945b9e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f7945b9e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f7945b9e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/producers/regproxy/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}